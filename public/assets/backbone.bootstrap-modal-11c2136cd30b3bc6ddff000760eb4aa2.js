!function(t,e,n){var o=e.templateSettings;e.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var i=e.template('    <div class="modal-dialog"><div class="modal-content">    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">&times;</a>        <% } %>        <h4>{{title}}</h4>      </div>    <% } %>    <div class="modal-body">{{content}}</div>    <% if (showFooter) { %>      <div class="modal-footer">        <% if (allowCancel) { %>          <% if (cancelText) { %>            <a href="#" class="btn cancel">{{cancelText}}</a>          <% } %>        <% } %>        <a href="#" class="btn ok btn-primary">{{okText}}</a>      </div>    <% } %>    </div></div>  ');e.templateSettings=o;var s=n.View.extend({className:"modal",events:{"click .close":function(t){t.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .cancel":function(t){t.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .ok":function(t){t.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close()},keypress:function(t){this.options.enterTriggersOk&&13==t.which&&(t.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close())}},initialize:function(t){this.options=e.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",showFooter:!0,allowCancel:!0,escape:!0,animate:!1,template:i,enterTriggersOk:!1},t)},render:function(){var t=this.$el,e=this.options,n=e.content;t.html(e.template(e));this.$content=t.find(".modal-body");return n&&n.$el&&(n.render(),t.find(".modal-body").html(n.$el)),e.animate&&t.addClass("fade"),this.isRendered=!0,this},open:function(n){this.isRendered||this.render();var o=this,i=this.$el;i.modal(e.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),i.one("shown.bs.modal",function(){o.options.focusOk&&i.find(".btn.ok").focus(),o.options.content&&o.options.content.trigger&&o.options.content.trigger("shown",o),o.trigger("shown")});var c=s.count,r=t(".modal-backdrop:eq("+c+")"),l=parseInt(r.css("z-index"),10),a=parseInt(r.css("z-index"),10);return r.css("z-index",l+c),this.$el.css("z-index",a+c),this.options.allowCancel&&(r.one("click",function(){o.options.content&&o.options.content.trigger&&o.options.content.trigger("cancel",o),o.trigger("cancel")}),t(document).one("keyup.dismiss.modal",function(t){27==t.which&&o.trigger("cancel"),o.options.content&&o.options.content.trigger&&27==t.which&&o.options.content.trigger("shown",o)})),this.on("cancel",function(){o.close()}),s.count++,n&&o.on("ok",n),this},close:function(){var t=this,e=this.$el;return this._preventClose?void(this._preventClose=!1):(e.one("hidden.bs.modal",function n(o){return o.target!==o.currentTarget?e.one("hidden",n):(t.remove(),t.options.content&&t.options.content.trigger&&t.options.content.trigger("hidden",t),void t.trigger("hidden"))}),e.modal("hide"),void s.count--)},preventClose:function(){this._preventClose=!0}},{count:0});return"function"==typeof require&&"undefined"!=typeof module&&exports&&(module.exports=s),"function"==typeof define&&define.amd?define(function(){n.BootstrapModal=s}):void(n.BootstrapModal=s)}(jQuery,_,Backbone);